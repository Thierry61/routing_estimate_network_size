<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `routing` crate.">
    <meta name="keywords" content="rust, rustlang, rust-lang, routing">

    <title>routing - Rust</title>

    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    

    <link rel="shortcut icon" href="http://maidsafe.net/img/favicon.ico">
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        <a href='../routing/index.html'><img src='https://raw.githubusercontent.com/maidsafe/QA/master/Images/maidsafe_logo.png' alt='logo' width='100'></a>
        <p class='location'></p><script>window.sidebarCurrent = {name: 'routing', ty: 'mod', relpath: '../'};</script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content mod">
<h1 class='fqn'><span class='in-band'>Crate <a class='mod' href=''>routing</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a id='src-0' class='srclink' href='../src/routing/src/lib.rs.html#18-209' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><p>Client and node implementations for a resilient decentralised network.</p>

<p>The network is based on the <a href="../kademlia_routing_table/index.html"><code>kademlia_routing_table</code></a> and uses the XOR metric to define the
&quot;distance&quot; between two <a href="../xor_name/struct.XorName.html"><code>XorName</code></a>s. <code>XorName</code>s are used as addresses of nodes, clients as
well as data.</p>

<p>Messages are exchanged between <em>authorities</em>, where an <code>Authority</code> can be an
individual client or node, or a group of nodes. In both cases, messages are cryptographically
signed by the sender, and in the latter case it is verified that a sufficient number of group
members agree on the message: Only if that quorum is reached, the message is delivered. In
addition, each message has a unique ID, and is delivered only once.</p>

<p>Group authorities are also addressed using a single <code>XorName</code>. The members of that group are
the nodes that are closest to that name. Since nodes are assigned their name by the network,
this provides redundancy and resilience: A node has no control over which group authorities it
will be a member of, and without a majority in the group it cannot forge a message from that
group.</p>

<p>The library also provides different types for the messages&#39; data.</p>

<h1 id='usage' class='section-header'><a href='#usage'>Usage</a></h1>
<p>A decentralised service based on the <code>routing</code> library uses <code>Client</code> to send requests to the
network of nodes and receive responses.</p>

<p><code>Node</code> is used to handle and send requests within that network, and to implement its
functionality, e. g. storing and retrieving data, validating permissions, managing metadata etc.</p>

<h2 id='client-creation' class='section-header'><a href='#client-creation'>Client creation</a></h2>
<p>A client&#39;s name is a hash of its public keys. Upon creation, the client will attempt to connect
to the network through any node, and exchange public keys with it. That node becomes a
bootstrap node for the client, and messages to and from the client will be routed over it.</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>sync</span>::<span class='ident'>mpsc</span>;
<span class='kw'>use</span> <span class='ident'>routing</span>::{<span class='ident'>Client</span>, <span class='ident'>Event</span>, <span class='ident'>FullId</span>};

<span class='kw'>let</span> (<span class='ident'>sender</span>, <span class='ident'>_receiver</span>) <span class='op'>=</span> <span class='ident'>mpsc</span>::<span class='ident'>channel</span>::<span class='op'>&lt;</span><span class='ident'>Event</span><span class='op'>&gt;</span>();
<span class='kw'>let</span> <span class='ident'>full_id</span> <span class='op'>=</span> <span class='ident'>FullId</span>::<span class='ident'>new</span>(); <span class='comment'>// Generate new keys.</span>
<span class='kw'>let</span> _ <span class='op'>=</span> <span class='ident'>Client</span>::<span class='ident'>new</span>(<span class='ident'>sender</span>, <span class='prelude-val'>Some</span>(<span class='ident'>full_id</span>.<span class='ident'>clone</span>())).<span class='ident'>unwrap</span>();

<span class='kw'>let</span> _ <span class='op'>=</span> <span class='ident'>full_id</span>.<span class='ident'>public_id</span>().<span class='ident'>name</span>();</pre>

<p>Messages can be sent using the methods of <code>client</code>, and received as <code>Event</code>s from the
<code>receiver</code>.</p>

<h2 id='node-creation' class='section-header'><a href='#node-creation'>Node creation</a></h2>
<p>Creating a node looks even simpler:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>sync</span>::<span class='ident'>mpsc</span>;
<span class='kw'>use</span> <span class='ident'>routing</span>::{<span class='ident'>Node</span>, <span class='ident'>Event</span>};

<span class='kw'>let</span> (<span class='ident'>sender</span>, <span class='ident'>_receiver</span>) <span class='op'>=</span> <span class='ident'>mpsc</span>::<span class='ident'>channel</span>::<span class='op'>&lt;</span><span class='ident'>Event</span><span class='op'>&gt;</span>();
<span class='kw'>let</span> _ <span class='op'>=</span> <span class='ident'>Node</span>::<span class='ident'>builder</span>().<span class='ident'>create</span>(<span class='ident'>sender</span>).<span class='ident'>unwrap</span>();</pre>

<p>Upon creation, the node will first connect to the network as a client. Once it has client
status, it requests a new name from the network, and then integrates itself in the network with
that new name, adding close nodes to its routing table.</p>

<p>Messages can be sent using the methods of <code>node</code>, and received as <code>Event</code>s from the <code>receiver</code>.
The node can act as an individual node or as part of a group authority. Sending a message as a
group authority only has an effect if sufficiently many other nodes in that authority send the
same message.</p>

<h1 id='sequence-diagrams' class='section-header'><a href='#sequence-diagrams'>Sequence diagrams</a></h1>
<ul>
<li><a href="bootstrap.png">Bootstrapping</a></li>
<li><a href="get-close-group.png"><code>GetCloseGroup</code></a></li>
<li><a href="new-node.png">Churn (<code>NewNode</code>)</a></li>
<li><a href="tunnel.png">Tunnel</a></li>
</ul>
</div><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='mod' href='client_errors/index.html'
                                  title='routing::client_errors'>client_errors</a></td>
                           <td class='docblock short'>
                                <p>Error communication between vaults and core</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='mod' href='messaging/index.html'
                                  title='routing::messaging'>messaging</a></td>
                           <td class='docblock short'>
                                <p>Messaging infrastructure</p>
                           </td>
                       </tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.Client.html'
                                  title='routing::Client'>Client</a></td>
                           <td class='docblock short'>
                                <p>Interface for sending and receiving messages to and from a network of nodes in the role of a
client.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.FullId.html'
                                  title='routing::FullId'>FullId</a></td>
                           <td class='docblock short'>
                                <p>Network identity component containing name, and public and private keys.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.ImmutableData.html'
                                  title='routing::ImmutableData'>ImmutableData</a></td>
                           <td class='docblock short'>
                                <p>An immutable chunk of data.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.MessageId.html'
                                  title='routing::MessageId'>MessageId</a></td>
                           <td class='docblock short'>
                                <p>Unique ID for messages</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.Node.html'
                                  title='routing::Node'>Node</a></td>
                           <td class='docblock short'>
                                <p>Interface for sending and receiving messages to and from other nodes, in the role of a full
routing node.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.NodeBuilder.html'
                                  title='routing::NodeBuilder'>NodeBuilder</a></td>
                           <td class='docblock short'>
                                <p>A builder to configure and create a new <code>Node</code>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.PublicId.html'
                                  title='routing::PublicId'>PublicId</a></td>
                           <td class='docblock short'>
                                <p>Network identity component containing name and public keys.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.StructuredData.html'
                                  title='routing::StructuredData'>StructuredData</a></td>
                           <td class='docblock short'>
                                <p>Mutable structured data.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.XorName.html'
                                  title='routing::XorName'>XorName</a></td>
                           <td class='docblock short'>
                                <p>A <a href="constant.XOR_NAME_BITS.html"><code>XOR_NAME_BITS</code></a>-bit number, viewed as a point in XOR space.</p>
                           </td>
                       </tr></table><h2 id='enums' class='section-header'><a href="#enums">Enums</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='enum' href='enum.Authority.html'
                                  title='routing::Authority'>Authority</a></td>
                           <td class='docblock short'>
                                <p>An entity that can act as a source or destination of a message.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='enum' href='enum.Data.html'
                                  title='routing::Data'>Data</a></td>
                           <td class='docblock short'>
                                <p>This is the data types routing handles in the public interface</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='enum' href='enum.DataIdentifier.html'
                                  title='routing::DataIdentifier'>DataIdentifier</a></td>
                           <td class='docblock short'>
                                <p>An identifier to address a data chunk.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='enum' href='enum.Event.html'
                                  title='routing::Event'>Event</a></td>
                           <td class='docblock short'>
                                <p>An Event raised by a <code>Node</code> or <code>Client</code> via its event sender.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='enum' href='enum.InterfaceError.html'
                                  title='routing::InterfaceError'>InterfaceError</a></td>
                           <td class='docblock short'>
                                <p>The type of errors that can occur if routing is unable to handle a send request.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='enum' href='enum.Request.html'
                                  title='routing::Request'>Request</a></td>
                           <td class='docblock short'>
                                <p>Request message types</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='enum' href='enum.Response.html'
                                  title='routing::Response'>Response</a></td>
                           <td class='docblock short'>
                                <p>Response message types</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='enum' href='enum.RoutingError.html'
                                  title='routing::RoutingError'>RoutingError</a></td>
                           <td class='docblock short'>
                                <p>The type of errors that can occur during handling of routing events.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='enum' href='enum.RoutingTableError.html'
                                  title='routing::RoutingTableError'>RoutingTableError</a></td>
                           <td class='docblock short'>
                                <p>Routing table error variants.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='enum' href='enum.XorNameFromHexError.html'
                                  title='routing::XorNameFromHexError'>XorNameFromHexError</a></td>
                           <td class='docblock short'>
                                <p>Errors that can occur when decoding a <code>XorName</code> from a string.</p>
                           </td>
                       </tr></table><h2 id='constants' class='section-header'><a href="#constants">Constants</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='constant' href='constant.MAX_STRUCTURED_DATA_SIZE_IN_BYTES.html'
                                  title='routing::MAX_STRUCTURED_DATA_SIZE_IN_BYTES'>MAX_STRUCTURED_DATA_SIZE_IN_BYTES</a></td>
                           <td class='docblock short'>
                                <p>Maximum allowed size for a Structured Data to grow to</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='constant' href='constant.MIN_GROUP_SIZE.html'
                                  title='routing::MIN_GROUP_SIZE'>MIN_GROUP_SIZE</a></td>
                           <td class='docblock short'>
                                <p>The minimum group size for the routing table.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='constant' href='constant.QUORUM_SIZE.html'
                                  title='routing::QUORUM_SIZE'>QUORUM_SIZE</a></td>
                           <td class='docblock short'>
                                <p>The quorum for group consensus.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='constant' href='constant.TYPE_TAG_DNS_PACKET.html'
                                  title='routing::TYPE_TAG_DNS_PACKET'>TYPE_TAG_DNS_PACKET</a></td>
                           <td class='docblock short'>
                                <p>Structured Data Tag for DNS Packet Type</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='constant' href='constant.TYPE_TAG_SESSION_PACKET.html'
                                  title='routing::TYPE_TAG_SESSION_PACKET'>TYPE_TAG_SESSION_PACKET</a></td>
                           <td class='docblock short'>
                                <p>Structured Data Tag for Session Packet Type</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='constant' href='constant.XOR_NAME_BITS.html'
                                  title='routing::XOR_NAME_BITS'>XOR_NAME_BITS</a></td>
                           <td class='docblock short'>
                                <p>Constant bit length of <code>XorName</code>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='constant' href='constant.XOR_NAME_LEN.html'
                                  title='routing::XOR_NAME_LEN'>XOR_NAME_LEN</a></td>
                           <td class='docblock short'>
                                <p>Constant byte length of <code>XorName</code>.</p>
                           </td>
                       </tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='trait' href='trait.Cache.html'
                                  title='routing::Cache'>Cache</a></td>
                           <td class='docblock short'>
                                <p>A cache that stores <code>Response</code>s keyed by <code>Requests</code>. Should be implemented
by layers above routing.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='trait' href='trait.Xorable.html'
                                  title='routing::Xorable'>Xorable</a></td>
                           <td class='docblock short'>
                                <p>A sequence of bits, as a point in XOR space.</p>
                           </td>
                       </tr></table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "routing";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script defer src="../search-index.js"></script>
</body>
</html>